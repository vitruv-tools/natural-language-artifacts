module AmaltheaToAscet_All;
create OUT : ascet from IN : amalthea;

rule ComponentContainer2AscetModule {
  from src : amalthea!ComponentContainer
  to   dst : ascet!AscetModule (
    tasks <- src.tasks->collect(t | thisModule.Task2SoftwareTask(t))
  )
}

rule TaskRoot2SoftwareTask {
  from src : amalthea!Task (
    amalthea!ComponentContainer.allInstances()->forAll(cc | not cc.tasks->includes(src))
  )
  to   dst : ascet!SoftwareTask (
    name <- src.name
  )
}

rule Task2SoftwareTask {
  from src : amalthea!Task
  to   dst : ascet!SoftwareTask (
    name <- src.name
  )
}