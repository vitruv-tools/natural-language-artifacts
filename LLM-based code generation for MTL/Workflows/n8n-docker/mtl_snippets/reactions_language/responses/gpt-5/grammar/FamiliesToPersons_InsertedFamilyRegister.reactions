import "http://vitruv.tools/methodologisttemplate/families" as families
import "http://vitruv.tools/methodologisttemplate/persons" as persons
reactions: familiesToPersons 
in reaction to changes in families 
execute actions in persons
reaction InsertedFamilyRegister {
  after element families::FamilyRegister inserted as root
  call createPersonRegister(element as families::FamilyRegister)
}
routine createPersonRegister(families::FamilyRegister familyRegister) {
  match {
    require absence of persons::PersonRegister corresponding to familyRegister
  }
  create {
    val personRegister = new persons::PersonRegister
  }
  update {
    personRegister.id = familyRegister.id
    persist(personRegister).at("http://vitruv.tools/methodologisttemplate/persons")
    createCorrespondence(familyRegister, personRegister)
  }
}