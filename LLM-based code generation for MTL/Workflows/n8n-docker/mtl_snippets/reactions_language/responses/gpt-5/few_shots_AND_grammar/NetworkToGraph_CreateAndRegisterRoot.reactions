import "http://vitruv.tools/methodologisttemplate/network" as network
import "http://vitruv.tools/methodologisttemplate/graph" as graph
reactions: networkToGraph 
in reaction to changes in network 
execute actions in graph
reaction SystemInsertedAsRoot {
	after element network::System inserted as root
	call createAndRegisterRoot(newValue)
}
routine createAndRegisterRoot(network::System createdSystem) {
	match {
		require absence of graph::Root corresponding to createdSystem
	}
	create {
		val newRoot = new graph::Root
	}
	update {
		persistProjectRelative(createdSystem, newRoot, "model/graph.graph")
		addCorrespondenceBetween(newRoot, createdSystem)
	}
}