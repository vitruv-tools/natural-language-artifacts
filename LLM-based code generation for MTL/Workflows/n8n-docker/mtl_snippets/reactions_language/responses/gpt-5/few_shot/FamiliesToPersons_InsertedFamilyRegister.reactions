import "http://vitruv.tools/methodologisttemplate/persons" as persons
import "http://vitruv.tools/methodologisttemplate/families" as families
reactions: familiesToPersons
in reaction to changes in families
execute actions in persons
reaction InsertedFamilyRegister {
	after element families::FamilyRegister inserted as root
	call createPersonRegister(newValue)
}
routine createPersonRegister(families::FamilyRegister createdFamilyRegister) {
	match {
		require absence of persons::PersonRegister corresponding to createdFamilyRegister
	}
	create {
		val newPersonRegister = new persons::PersonRegister
	}
	update {
		persistProjectRelative(createdFamilyRegister, newPersonRegister, "model/persons.persons")
		addCorrespondenceBetween(newPersonRegister, createdFamilyRegister)
	}
}