import "http://vitruv.tools/methodologisttemplate/amalthea" as amalthea
import "http://vitruv.tools/methodologisttemplate/ascet" as ascet
reactions: amaltheaToAscet 
in reaction to changes in amalthea 
execute actions in ascet {
    reaction ComponentContainerInsertedAsRoot {
        after element amalthea::ComponentContainer inserted as root
        call createAndRegisterRootComponentContainer(affectedEObject as amalthea::ComponentContainer)
    }
    routine createAndRegisterRootComponentContainer(amalthea::ComponentContainer cc) {
        match {
            require absence of ascet::AscetModule corresponding to cc
        }
        create {
            val newModule = new ascet::AscetModule
            persist newModule at "ascet-gen/model.ascet"
        }
    }
}