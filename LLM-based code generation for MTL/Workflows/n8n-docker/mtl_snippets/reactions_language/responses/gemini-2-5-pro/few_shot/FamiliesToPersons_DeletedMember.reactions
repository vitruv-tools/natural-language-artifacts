import "http://vitruv.tools/methodologisttemplate/persons" as persons
import "http://vitruv.tools/methodologisttemplate/families" as families

transformation familiesToPersons
	reacts to families
	enforces persons

reaction DeletedMember {
	after element families::Member deleted
	call deletePerson(affectedEObject)
}

routine deletePerson(families::Member deletedMember) {
	match {
		val person = retrieve persons::Person corresponding to deletedMember
		val family = retrieve families::Family corresponding to person
	}
	update {
		removeObject(person)
		removeCorrespondenceBetween(deletedMember, person)
		removeCorrespondenceBetween(person, family)
	}
}