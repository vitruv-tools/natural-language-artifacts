import "http://vitruv.tools/methodologisttemplate/amalthea" as amalthea
import "http://vitruv.tools/methodologisttemplate/ascet" as ascet

reactions: amaltheaToAscet
in reaction to changes in amalthea
execute actions in ascet

reaction ComponentContainerInsertedAsRoot {
	after element amalthea::ComponentContainer inserted as root
	call createAndRegisterRootComponentContainer(newValue)
}

routine createAndRegisterRootComponentContainer(amalthea::ComponentContainer createdComponentContainer) {
	match {
		require absence of ascet::AscetModule corresponding to createdComponentContainer
	}
	create {
		val newAscetModule = new ascet::AscetModule
	}
	update {
		persistProjectRelative(createdComponentContainer, newAscetModule, "model/ascet.ascet")
		addCorrespondenceBetween(newAscetModule, createdComponentContainer)
	}
}