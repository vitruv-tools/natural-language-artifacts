import "http://vitruv.tools/methodologisttemplate/amalthea" as amalthea
import "http://vitruv.tools/methodologisttemplate/ascet" as ascet

transformation amaltheaToAscet {
    between amalthea and ascet
    
    reaction TaskDeleted {
        after element amalthea::Task deleted
        call deleteTask(affectedEObject)
    }
    
    routine deleteTask(amalthea::Task deletedTask) {
        match {
            val correspondingAscetTask = retrieve optional ascet::Task corresponding to deletedTask
        }
        update {
            if (correspondingAscetTask.isPresent) {
                removeObject(correspondingAscetTask.get)
                removeCorrespondenceBetween(deletedTask, correspondingAscetTask.get)
            }
        }
    }
}