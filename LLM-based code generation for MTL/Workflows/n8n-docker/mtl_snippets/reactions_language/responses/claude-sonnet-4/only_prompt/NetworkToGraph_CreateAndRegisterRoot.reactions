import "http://vitruv.tools/methodologisttemplate/network" as network
import "http://vitruv.tools/methodologisttemplate/graph" as graph

transformation networkToGraph {
    reaction SystemInsertedAsRoot {
        after element network::System inserted as root
        call createAndRegisterRoot(newValue)
    }
    
    routine createAndRegisterRoot(network::System system) {
        match {
            require absence of graph::Root corresponding to system
        }
        create {
            val root = new graph::Root
            persistProjectRelative(root, "graph", "root.graph")
            addCorrespondenceBetween(system, root)
        }
    }
}